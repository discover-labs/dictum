<style>
input[type="checkbox"].hidden {
    display: none;
}
.collapse-label::before {
    display: inline;
    content: "▶ ";
}
input[type="checkbox"].hidden:checked + .collapse-label::before {
    content: "▼ ";
}
input[type="checkbox"].hidden + .collapse-label + .collapse {
    display: none;
}
input[type="checkbox"].hidden:checked + .collapse-label + .collapse {
    display: block;
}
.tree {
    margin-left: 1rem;
}
</style>

<h1><code>{{prefix}}{{ calculation.id }}</code></h1>

<p><strong>{{ calculation.name }}</strong></p>

{% if calculation.description %}
<p>{{ calculation.description }}</p>
{% endif %}

{% if calculation.table %}
<p>
on table {{ calculation.table.id }}: <code>{{ calculation.table.source }}</code>
</p>
{% endif %}

<p>
    <div>
        <input id="expr" class="hidden" type="checkbox">
        <label for="expr" class="collapse-label"><code>{{ calculation.str_expr }}</code></label>
        <pre class="tree collapse">{{ calculation.expr_tree }}</pre>
    </div>
</p>
